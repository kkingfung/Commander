# The Last Witness（最後の証人）

Unreal Engine 5 で開発されたヴィクトリア朝時代の探偵推理ゲーム。

<img src="/Result1.PNG" width="300">
<img src="/Result2.PNG" width="300">

## 概要

**The Last Witness** は、ヴィクトリア朝ロンドンを舞台にしたナラティブ駆動型の探偵ゲームです。プレイヤーは、証拠分析と論理的推論を支援するAIコンパニオン「ABEL（Analytical Bureau for Evidence and Logic）」と共に、事件の真相を追求する捜査官となります。

## ストーリー

1888年、ロンドン。著名な人物が不審な状況で死亡しているのが発見された。スコットランドヤードの捜査官として、あなたは犯行現場を調査し、容疑者を尋問し、証拠を収集し、真犯人が逃亡する前に真実を解き明かさなければならない。

## ゲームプレイ

### 調査フェーズ
- **場所の探索**: 事件に関連するさまざまな場所を移動
- **証拠の調査**: 物的証拠、文書、観察記録を発見・収集
- **人物への聞き込み**: 目撃者や容疑者と会話し、証言を集める

### 推理システム
- **証拠帳**: 収集したすべての証拠をいつでも確認可能
- **推理ボード**: 2つの証拠を組み合わせて論理的なつながりを形成
- **ABEL分析**: AIアシスタントに相談し、洞察と提案を受ける

### 告発
- 十分な証拠を集めたら、容疑者を告発
- あなたの選択が結末を決定する - 正義は果たされるのか、それとも無実の人が罪に問われるのか？

## 特徴

- **ヴィクトリア朝の雰囲気**: 時代に即した美的デザインの没入感あるUI
- **複数の容疑者**: 各キャラクターには独自の動機と秘密がある
- **証拠のつながり**: 手がかり間の隠された関係を発見
- **ABEL AIコンパニオン**: 答えを教えずに分析的サポートを提供
- **分岐する結末**: あなたの推理がストーリーの結末に影響

## 操作方法

| アクション | 入力 |
|-----------|------|
| 選択/インタラクト | 左クリック |
| 証拠帳を開く | 証拠帳ボタン |
| 推理ボードを開く | 推理ボードボタン |
| 移動 | 移動ボタン |
| ABELに相談 | ABEL相談ボタン |

## ゲームフロー

```
メインメニュー
    ↓
事件紹介
    ↓
調査 ←─────────────────────────┐
    │                          │
    ├── 証拠を調査              │
    ├── キャラクターと会話 ──→ 対話
    ├── 場所を移動              │
    ├── 証拠帳を開く            │
    ├── ABELに相談 ─────────→ ABEL分析
    └── 推理ボード ──────────→ 推理
                               │
    ↓                          │
告発 ←─────────────────────────┘
    ↓
解決 / エンディング
```

## ゲームフェーズ

| フェーズ | 説明 |
|---------|------|
| MainMenu | メインメニュー画面 |
| CaseIntro | 事件の概要紹介 |
| Investigation | 場所の調査、証拠収集 |
| Dialogue | キャラクターとの対話 |
| ABELAnalysis | AIアシスタントによる分析 |
| Deduction | 証拠を組み合わせて推理 |
| Accusation | 容疑者の告発 |
| Resolution | 事件の解決、結末 |

## 技術詳細

- **エンジン**: Unreal Engine 5.7.1
- **言語**: C++ + Blueprint
- **UIシステム**: UMG（Unreal Motion Graphics）
- **アーキテクチャ**: コンポーネントベース、イベント駆動型

### 主要システム

| システム | 説明 |
|---------|------|
| `WitnessGameMode` | ゲームループとフェーズ管理 |
| `CaseState` | 証拠、キャラクター、場所データの管理 |
| `DialogueManager` | 分岐選択肢付き会話システム |
| `ABELSystem` | AIコンパニオンの分析と提案 |
| `MainGameWidget` | 中央UI管理 |

### UIウィジェット構成

| ウィジェット | 機能 |
|-------------|------|
| `MainGameWidget` | メインUI、パネル切り替え |
| `EvidenceCardWidget` | 証拠カード表示 |
| `CharacterCardWidget` | キャラクターカード表示 |
| `DialogueChoiceWidget` | 対話選択肢 |
| `DeductionSlotWidget` | 推理スロット |
| `LocationCardWidget` | 場所カード |
| `SuspectCardWidget` | 容疑者カード |
| `ABELSuggestionWidget` | ABEL提案表示 |

## プロジェクト構造

```
TheLastWitness/
├── Public/
│   ├── Core/
│   │   ├── WitnessGameMode.h    # ゲームモード
│   │   ├── WitnessTypes.h       # 型定義
│   │   └── CaseState.h          # 事件状態管理
│   ├── Dialogue/
│   │   └── DialogueManager.h    # 対話管理
│   ├── AI/
│   │   └── ABELSystem.h         # AIシステム
│   └── UI/
│       ├── MainGameWidget.h     # メインUI
│       ├── EvidenceCardWidget.h # 証拠カード
│       ├── CharacterCardWidget.h # キャラクターカード
│       ├── DialogueChoiceWidget.h # 対話選択肢
│       ├── DeductionSlotWidget.h  # 推理スロット
│       └── ...
├── Private/
│   └── (実装ファイル)
├── README.md      # 英語版
└── README_JP.md   # 日本語版（このファイル）
```

## イベントシステム

### GameMode イベント

| イベント | 発火タイミング |
|---------|---------------|
| `OnPhaseChanged` | フェーズ遷移時 |
| `OnGameEnded` | ゲーム終了時 |

### CaseState イベント

| イベント | 発火タイミング |
|---------|---------------|
| `OnEvidenceCollected` | 証拠収集時 |

### DialogueManager イベント

| イベント | 発火タイミング |
|---------|---------------|
| `OnDialogueNodeChanged` | 対話ノード変更時 |
| `OnChoicesAvailable` | 選択肢表示時 |

### ABELSystem イベント

| イベント | 発火タイミング |
|---------|---------------|
| `OnABELSpeaks` | ABELが発言時 |

## 開発について

このプロジェクトは、以下のスキルを示すポートフォリオ作品として開発されました：

- Unreal Engine 5 におけるクリーンな C++ アーキテクチャ
- イベント駆動型UIシステム設計
- ナラティブゲームメカニクスの実装
- ヴィクトリア朝ビジュアルデザインの原則

## 動作確認済み環境

- Windows 10/11
- Unreal Engine 5.7.1
- Visual Studio 2022

---

## ライセンス

このプロジェクトはポートフォリオおよび教育目的です。


---

*「真実は純粋であることはまれであり、決して単純ではない」 - オスカー・ワイルド*
